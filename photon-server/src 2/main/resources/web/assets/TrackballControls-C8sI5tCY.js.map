{"version":3,"file":"TrackballControls-C8sI5tCY.js","sources":["../../node_modules/three/examples/jsm/controls/TrackballControls.js"],"sourcesContent":["import {\n\tControls,\n\tMathUtils,\n\tMOUSE,\n\tQuaternion,\n\tVector2,\n\tVector3\n} from 'three';\n\n/**\n * Fires when the camera has been transformed by the controls.\n *\n * @event TrackballControls#change\n * @type {Object}\n */\nconst _changeEvent = { type: 'change' };\n\n/**\n * Fires when an interaction was initiated.\n *\n * @event TrackballControls#start\n * @type {Object}\n */\nconst _startEvent = { type: 'start' };\n\n/**\n * Fires when an interaction has finished.\n *\n * @event TrackballControls#end\n * @type {Object}\n */\nconst _endEvent = { type: 'end' };\n\nconst _EPS = 0.000001;\nconst _STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\n\nconst _v2 = new Vector2();\nconst _mouseChange = new Vector2();\nconst _objectUp = new Vector3();\nconst _pan = new Vector3();\nconst _axis = new Vector3();\nconst _quaternion = new Quaternion();\nconst _eyeDirection = new Vector3();\nconst _objectUpDirection = new Vector3();\nconst _objectSidewaysDirection = new Vector3();\nconst _moveDirection = new Vector3();\n\n/**\n * This class is similar to {@link OrbitControls}. However, it does not maintain a constant camera\n * `up` vector. That means if the camera orbits over the “north” and “south” poles, it does not flip\n * to stay \"right side up\".\n *\n * @augments Controls\n * @three_import import { TrackballControls } from 'three/addons/controls/TrackballControls.js';\n */\nclass TrackballControls extends Controls {\n\n\t/**\n\t * Constructs a new controls instance.\n\t *\n\t * @param {Object3D} object - The object that is managed by the controls.\n\t * @param {?HTMLDOMElement} domElement - The HTML element used for event listeners.\n\t */\n\tconstructor( object, domElement = null ) {\n\n\t\tsuper( object, domElement );\n\n\t\t/**\n\t\t * Represents the properties of the screen. Automatically set when `handleResize()` is called.\n\t\t *\n\t\t * @type {Object}\n\t\t * @readonly\n\t\t */\n\t\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\n\n\t\t/**\n\t\t * The rotation speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1\n\t\t */\n\t\tthis.rotateSpeed = 1.0;\n\n\t\t/**\n\t\t * The zoom speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 1.2\n\t\t */\n\t\tthis.zoomSpeed = 1.2;\n\n\t\t/**\n\t\t * The pan speed.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.3\n\t\t */\n\t\tthis.panSpeed = 0.3;\n\n\t\t/**\n\t\t * Whether rotation is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noRotate = false;\n\n\t\t/**\n\t\t * Whether zooming is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noZoom = false;\n\n\t\t/**\n\t\t * Whether panning is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.noPan = false;\n\n\t\t/**\n\t\t * Whether damping is disabled or not.\n\t\t *\n\t\t * @type {boolean}\n\t\t * @default false\n\t\t */\n\t\tthis.staticMoving = false;\n\n\t\t/**\n\t\t * Defines the intensity of damping. Only considered if `staticMoving` is set to `false`.\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0.2\n\t\t */\n\t\tthis.dynamicDampingFactor = 0.2;\n\n\t\t/**\n\t\t * How far you can dolly in (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minDistance = 0;\n\n\t\t/**\n\t\t * How far you can dolly out (perspective camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxDistance = Infinity;\n\n\t\t/**\n\t\t * How far you can zoom in (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default 0\n\t\t */\n\t\tthis.minZoom = 0;\n\n\t\t/**\n\t\t * How far you can zoom out (orthographic camera only).\n\t\t *\n\t\t * @type {number}\n\t\t * @default Infinity\n\t\t */\n\t\tthis.maxZoom = Infinity;\n\n\t\t/**\n\t\t * This array holds keycodes for controlling interactions.\n\t\t *\n\t\t * - When the first defined key is pressed, all mouse interactions (left, middle, right) performs orbiting.\n\t\t * - When the second defined key is pressed, all mouse interactions (left, middle, right) performs zooming.\n\t\t * - When the third defined key is pressed, all mouse interactions (left, middle, right) performs panning.\n\t\t *\n\t\t * Default is *KeyA, KeyS, KeyD* which represents A, S, D.\n\t\t *\n\t\t * @type {Array<string>}\n\t\t */\n\t\tthis.keys = [ 'KeyA' /*A*/, 'KeyS' /*S*/, 'KeyD' /*D*/ ];\n\n\t\t/**\n\t\t * This object contains references to the mouse actions used by the controls.\n\t\t *\n\t\t * ```js\n\t\t * controls.mouseButtons = {\n\t\t * \tLEFT: THREE.MOUSE.ROTATE,\n\t\t * \tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t * \tRIGHT: THREE.MOUSE.PAN\n\t\t * }\n\t\t * ```\n\t\t * @type {Object}\n\t\t */\n\t\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t\t/**\n\t\t * The focus point of the controls.\n\t\t *\n\t\t * @type {Vector3}\n\t\t */\n\t\tthis.target = new Vector3();\n\n\t\t// internals\n\n\t\tthis.state = _STATE.NONE;\n\t\tthis.keyState = _STATE.NONE;\n\n\t\tthis._lastPosition = new Vector3();\n\t\tthis._lastZoom = 1;\n\t\tthis._touchZoomDistanceStart = 0;\n\t\tthis._touchZoomDistanceEnd = 0;\n\t\tthis._lastAngle = 0;\n\n\t\tthis._eye = new Vector3();\n\n\t\tthis._movePrev = new Vector2();\n\t\tthis._moveCurr = new Vector2();\n\n\t\tthis._lastAxis = new Vector3();\n\n\t\tthis._zoomStart = new Vector2();\n\t\tthis._zoomEnd = new Vector2();\n\n\t\tthis._panStart = new Vector2();\n\t\tthis._panEnd = new Vector2();\n\n\t\tthis._pointers = [];\n\t\tthis._pointerPositions = {};\n\n\t\t// event listeners\n\n\t\tthis._onPointerMove = onPointerMove.bind( this );\n\t\tthis._onPointerDown = onPointerDown.bind( this );\n\t\tthis._onPointerUp = onPointerUp.bind( this );\n\t\tthis._onPointerCancel = onPointerCancel.bind( this );\n\t\tthis._onContextMenu = onContextMenu.bind( this );\n\t\tthis._onMouseWheel = onMouseWheel.bind( this );\n\t\tthis._onKeyDown = onKeyDown.bind( this );\n\t\tthis._onKeyUp = onKeyUp.bind( this );\n\n\t\tthis._onTouchStart = onTouchStart.bind( this );\n\t\tthis._onTouchMove = onTouchMove.bind( this );\n\t\tthis._onTouchEnd = onTouchEnd.bind( this );\n\n\t\tthis._onMouseDown = onMouseDown.bind( this );\n\t\tthis._onMouseMove = onMouseMove.bind( this );\n\t\tthis._onMouseUp = onMouseUp.bind( this );\n\n\t\t// for reset\n\n\t\tthis._target0 = this.target.clone();\n\t\tthis._position0 = this.object.position.clone();\n\t\tthis._up0 = this.object.up.clone();\n\t\tthis._zoom0 = this.object.zoom;\n\n\t\tif ( domElement !== null ) {\n\n\t\t\tthis.connect( domElement );\n\n\t\t\tthis.handleResize();\n\n\t\t}\n\n\t\t// force an update at start\n\t\tthis.update();\n\n\t}\n\n\tconnect( element ) {\n\n\t\tsuper.connect( element );\n\n\t\twindow.addEventListener( 'keydown', this._onKeyDown );\n\t\twindow.addEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.addEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.addEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.addEventListener( 'wheel', this._onMouseWheel, { passive: false } );\n\t\tthis.domElement.addEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\n\t}\n\n\tdisconnect() {\n\n\t\twindow.removeEventListener( 'keydown', this._onKeyDown );\n\t\twindow.removeEventListener( 'keyup', this._onKeyUp );\n\n\t\tthis.domElement.removeEventListener( 'pointerdown', this._onPointerDown );\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\t\tthis.domElement.removeEventListener( 'pointercancel', this._onPointerCancel );\n\t\tthis.domElement.removeEventListener( 'wheel', this._onMouseWheel );\n\t\tthis.domElement.removeEventListener( 'contextmenu', this._onContextMenu );\n\n\t\tthis.domElement.style.touchAction = 'auto'; // disable touch scroll\n\n\t}\n\n\tdispose() {\n\n\t\tthis.disconnect();\n\n\t}\n\n\t/**\n\t * Must be called if the application window is resized.\n\t */\n\thandleResize() {\n\n\t\tconst box = this.domElement.getBoundingClientRect();\n\t\t// adjustments come from similar code in the jquery offset() function\n\t\tconst d = this.domElement.ownerDocument.documentElement;\n\n\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\n\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\n\t\tthis.screen.width = box.width;\n\t\tthis.screen.height = box.height;\n\n\t}\n\n\tupdate() {\n\n\t\tthis._eye.subVectors( this.object.position, this.target );\n\n\t\tif ( ! this.noRotate ) {\n\n\t\t\tthis._rotateCamera();\n\n\t\t}\n\n\t\tif ( ! this.noZoom ) {\n\n\t\t\tthis._zoomCamera();\n\n\t\t}\n\n\t\tif ( ! this.noPan ) {\n\n\t\t\tthis._panCamera();\n\n\t\t}\n\n\t\tthis.object.position.addVectors( this.target, this._eye );\n\n\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\tthis._checkDistances();\n\n\t\t\tthis.object.lookAt( this.target );\n\n\t\t\tif ( this._lastPosition.distanceToSquared( this.object.position ) > _EPS ) {\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\tthis._lastPosition.copy( this.object.position );\n\n\t\t\t}\n\n\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\tthis.object.lookAt( this.target );\n\n\t\t\tif ( this._lastPosition.distanceToSquared( this.object.position ) > _EPS || this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\tthis.dispatchEvent( _changeEvent );\n\n\t\t\t\tthis._lastPosition.copy( this.object.position );\n\t\t\t\tthis._lastZoom = this.object.zoom;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type.' );\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Resets the controls to its initial state.\n\t */\n\treset() {\n\n\t\tthis.state = _STATE.NONE;\n\t\tthis.keyState = _STATE.NONE;\n\n\t\tthis.target.copy( this._target0 );\n\t\tthis.object.position.copy( this._position0 );\n\t\tthis.object.up.copy( this._up0 );\n\t\tthis.object.zoom = this._zoom0;\n\n\t\tthis.object.updateProjectionMatrix();\n\n\t\tthis._eye.subVectors( this.object.position, this.target );\n\n\t\tthis.object.lookAt( this.target );\n\n\t\tthis.dispatchEvent( _changeEvent );\n\n\t\tthis._lastPosition.copy( this.object.position );\n\t\tthis._lastZoom = this.object.zoom;\n\n\t}\n\n\t_panCamera() {\n\n\t\t_mouseChange.copy( this._panEnd ).sub( this._panStart );\n\n\t\tif ( _mouseChange.lengthSq() ) {\n\n\t\t\tif ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tconst scale_x = ( this.object.right - this.object.left ) / this.object.zoom / this.domElement.clientWidth;\n\t\t\t\tconst scale_y = ( this.object.top - this.object.bottom ) / this.object.zoom / this.domElement.clientWidth;\n\n\t\t\t\t_mouseChange.x *= scale_x;\n\t\t\t\t_mouseChange.y *= scale_y;\n\n\t\t\t}\n\n\t\t\t_mouseChange.multiplyScalar( this._eye.length() * this.panSpeed );\n\n\t\t\t_pan.copy( this._eye ).cross( this.object.up ).setLength( _mouseChange.x );\n\t\t\t_pan.add( _objectUp.copy( this.object.up ).setLength( _mouseChange.y ) );\n\n\t\t\tthis.object.position.add( _pan );\n\t\t\tthis.target.add( _pan );\n\n\t\t\tif ( this.staticMoving ) {\n\n\t\t\t\tthis._panStart.copy( this._panEnd );\n\n\t\t\t} else {\n\n\t\t\t\tthis._panStart.add( _mouseChange.subVectors( this._panEnd, this._panStart ).multiplyScalar( this.dynamicDampingFactor ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_rotateCamera() {\n\n\t\t_moveDirection.set( this._moveCurr.x - this._movePrev.x, this._moveCurr.y - this._movePrev.y, 0 );\n\t\tlet angle = _moveDirection.length();\n\n\t\tif ( angle ) {\n\n\t\t\tthis._eye.copy( this.object.position ).sub( this.target );\n\n\t\t\t_eyeDirection.copy( this._eye ).normalize();\n\t\t\t_objectUpDirection.copy( this.object.up ).normalize();\n\t\t\t_objectSidewaysDirection.crossVectors( _objectUpDirection, _eyeDirection ).normalize();\n\n\t\t\t_objectUpDirection.setLength( this._moveCurr.y - this._movePrev.y );\n\t\t\t_objectSidewaysDirection.setLength( this._moveCurr.x - this._movePrev.x );\n\n\t\t\t_moveDirection.copy( _objectUpDirection.add( _objectSidewaysDirection ) );\n\n\t\t\t_axis.crossVectors( _moveDirection, this._eye ).normalize();\n\n\t\t\tangle *= this.rotateSpeed;\n\t\t\t_quaternion.setFromAxisAngle( _axis, angle );\n\n\t\t\tthis._eye.applyQuaternion( _quaternion );\n\t\t\tthis.object.up.applyQuaternion( _quaternion );\n\n\t\t\tthis._lastAxis.copy( _axis );\n\t\t\tthis._lastAngle = angle;\n\n\t\t} else if ( ! this.staticMoving && this._lastAngle ) {\n\n\t\t\tthis._lastAngle *= Math.sqrt( 1.0 - this.dynamicDampingFactor );\n\t\t\tthis._eye.copy( this.object.position ).sub( this.target );\n\t\t\t_quaternion.setFromAxisAngle( this._lastAxis, this._lastAngle );\n\t\t\tthis._eye.applyQuaternion( _quaternion );\n\t\t\tthis.object.up.applyQuaternion( _quaternion );\n\n\t\t}\n\n\t\tthis._movePrev.copy( this._moveCurr );\n\n\t}\n\n\t_zoomCamera() {\n\n\t\tlet factor;\n\n\t\tif ( this.state === _STATE.TOUCH_ZOOM_PAN ) {\n\n\t\t\tfactor = this._touchZoomDistanceStart / this._touchZoomDistanceEnd;\n\t\t\tthis._touchZoomDistanceStart = this._touchZoomDistanceEnd;\n\n\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\tthis._eye.multiplyScalar( factor );\n\n\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\tthis.object.zoom = MathUtils.clamp( this.object.zoom / factor, this.minZoom, this.maxZoom );\n\n\t\t\t\tif ( this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfactor = 1.0 + ( this._zoomEnd.y - this._zoomStart.y ) * this.zoomSpeed;\n\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\n\n\t\t\t\tif ( this.object.isPerspectiveCamera ) {\n\n\t\t\t\t\tthis._eye.multiplyScalar( factor );\n\n\t\t\t\t} else if ( this.object.isOrthographicCamera ) {\n\n\t\t\t\t\tthis.object.zoom = MathUtils.clamp( this.object.zoom / factor, this.minZoom, this.maxZoom );\n\n\t\t\t\t\tif ( this._lastZoom !== this.object.zoom ) {\n\n\t\t\t\t\t\tthis.object.updateProjectionMatrix();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.TrackballControls: Unsupported camera type' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( this.staticMoving ) {\n\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t} else {\n\n\t\t\t\tthis._zoomStart.y += ( this._zoomEnd.y - this._zoomStart.y ) * this.dynamicDampingFactor;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_getMouseOnScreen( pageX, pageY ) {\n\n\t\t_v2.set(\n\t\t\t( pageX - this.screen.left ) / this.screen.width,\n\t\t\t( pageY - this.screen.top ) / this.screen.height\n\t\t);\n\n\t\treturn _v2;\n\n\t}\n\n\t_getMouseOnCircle( pageX, pageY ) {\n\n\t\t_v2.set(\n\t\t\t( ( pageX - this.screen.width * 0.5 - this.screen.left ) / ( this.screen.width * 0.5 ) ),\n\t\t\t( ( this.screen.height + 2 * ( this.screen.top - pageY ) ) / this.screen.width ) // screen.width intentional\n\t\t);\n\n\t\treturn _v2;\n\n\t}\n\n\t_addPointer( event ) {\n\n\t\tthis._pointers.push( event );\n\n\t}\n\n\t_removePointer( event ) {\n\n\t\tdelete this._pointerPositions[ event.pointerId ];\n\n\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\tif ( this._pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\tthis._pointers.splice( i, 1 );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_trackPointer( event ) {\n\n\t\tlet position = this._pointerPositions[ event.pointerId ];\n\n\t\tif ( position === undefined ) {\n\n\t\t\tposition = new Vector2();\n\t\t\tthis._pointerPositions[ event.pointerId ] = position;\n\n\t\t}\n\n\t\tposition.set( event.pageX, event.pageY );\n\n\t}\n\n\t_getSecondPointerPosition( event ) {\n\n\t\tconst pointer = ( event.pointerId === this._pointers[ 0 ].pointerId ) ? this._pointers[ 1 ] : this._pointers[ 0 ];\n\n\t\treturn this._pointerPositions[ pointer.pointerId ];\n\n\t}\n\n\t_checkDistances() {\n\n\t\tif ( ! this.noZoom || ! this.noPan ) {\n\n\t\t\tif ( this._eye.lengthSq() > this.maxDistance * this.maxDistance ) {\n\n\t\t\t\tthis.object.position.addVectors( this.target, this._eye.setLength( this.maxDistance ) );\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t}\n\n\t\t\tif ( this._eye.lengthSq() < this.minDistance * this.minDistance ) {\n\n\t\t\t\tthis.object.position.addVectors( this.target, this._eye.setLength( this.minDistance ) );\n\t\t\t\tthis._zoomStart.copy( this._zoomEnd );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nfunction onPointerDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.setPointerCapture( event.pointerId );\n\n\t\tthis.domElement.addEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.addEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n\t//\n\n\tthis._addPointer( event );\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchStart( event );\n\n\t} else {\n\n\t\tthis._onMouseDown( event );\n\n\t}\n\n}\n\nfunction onPointerMove( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchMove( event );\n\n\t} else {\n\n\t\tthis._onMouseMove( event );\n\n\t}\n\n}\n\nfunction onPointerUp( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( event.pointerType === 'touch' ) {\n\n\t\tthis._onTouchEnd( event );\n\n\t} else {\n\n\t\tthis._onMouseUp();\n\n\t}\n\n\t//\n\n\tthis._removePointer( event );\n\n\tif ( this._pointers.length === 0 ) {\n\n\t\tthis.domElement.releasePointerCapture( event.pointerId );\n\n\t\tthis.domElement.removeEventListener( 'pointermove', this._onPointerMove );\n\t\tthis.domElement.removeEventListener( 'pointerup', this._onPointerUp );\n\n\t}\n\n}\n\nfunction onPointerCancel( event ) {\n\n\tthis._removePointer( event );\n\n}\n\nfunction onKeyUp() {\n\n\tif ( this.enabled === false ) return;\n\n\tthis.keyState = _STATE.NONE;\n\n\twindow.addEventListener( 'keydown', this._onKeyDown );\n\n}\n\nfunction onKeyDown( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\twindow.removeEventListener( 'keydown', this._onKeyDown );\n\n\tif ( this.keyState !== _STATE.NONE ) {\n\n\t\treturn;\n\n\t} else if ( event.code === this.keys[ _STATE.ROTATE ] && ! this.noRotate ) {\n\n\t\tthis.keyState = _STATE.ROTATE;\n\n\t} else if ( event.code === this.keys[ _STATE.ZOOM ] && ! this.noZoom ) {\n\n\t\tthis.keyState = _STATE.ZOOM;\n\n\t} else if ( event.code === this.keys[ _STATE.PAN ] && ! this.noPan ) {\n\n\t\tthis.keyState = _STATE.PAN;\n\n\t}\n\n}\n\nfunction onMouseDown( event ) {\n\n\tlet mouseAction;\n\n\tswitch ( event.button ) {\n\n\t\tcase 0:\n\t\t\tmouseAction = this.mouseButtons.LEFT;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\tmouseAction = this.mouseButtons.MIDDLE;\n\t\t\tbreak;\n\n\t\tcase 2:\n\t\t\tmouseAction = this.mouseButtons.RIGHT;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmouseAction = - 1;\n\n\t}\n\n\tswitch ( mouseAction ) {\n\n\t\tcase MOUSE.DOLLY:\n\t\t\tthis.state = _STATE.ZOOM;\n\t\t\tbreak;\n\n\t\tcase MOUSE.ROTATE:\n\t\t\tthis.state = _STATE.ROTATE;\n\t\t\tbreak;\n\n\t\tcase MOUSE.PAN:\n\t\t\tthis.state = _STATE.PAN;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthis.state = _STATE.NONE;\n\n\t}\n\n\tconst state = ( this.keyState !== _STATE.NONE ) ? this.keyState : this.state;\n\n\tif ( state === _STATE.ROTATE && ! this.noRotate ) {\n\n\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\tthis._movePrev.copy( this._moveCurr );\n\n\t} else if ( state === _STATE.ZOOM && ! this.noZoom ) {\n\n\t\tthis._zoomStart.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\t\tthis._zoomEnd.copy( this._zoomStart );\n\n\t} else if ( state === _STATE.PAN && ! this.noPan ) {\n\n\t\tthis._panStart.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\t\tthis._panEnd.copy( this._panStart );\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\n}\n\nfunction onMouseMove( event ) {\n\n\tconst state = ( this.keyState !== _STATE.NONE ) ? this.keyState : this.state;\n\n\tif ( state === _STATE.ROTATE && ! this.noRotate ) {\n\n\t\tthis._movePrev.copy( this._moveCurr );\n\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\n\t} else if ( state === _STATE.ZOOM && ! this.noZoom ) {\n\n\t\tthis._zoomEnd.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t} else if ( state === _STATE.PAN && ! this.noPan ) {\n\n\t\tthis._panEnd.copy( this._getMouseOnScreen( event.pageX, event.pageY ) );\n\n\t}\n\n}\n\nfunction onMouseUp() {\n\n\tthis.state = _STATE.NONE;\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onMouseWheel( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tif ( this.noZoom === true ) return;\n\n\tevent.preventDefault();\n\n\tswitch ( event.deltaMode ) {\n\n\t\tcase 2:\n\t\t\t// Zoom in pages\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.025;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\t// Zoom in lines\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.01;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\t// undefined, 0, assume pixels\n\t\t\tthis._zoomStart.y -= event.deltaY * 0.00025;\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nfunction onContextMenu( event ) {\n\n\tif ( this.enabled === false ) return;\n\n\tevent.preventDefault();\n\n}\n\nfunction onTouchStart( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( this._pointers[ 0 ].pageX, this._pointers[ 0 ].pageY ) );\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tbreak;\n\n\t\tdefault: // 2 or more\n\t\t\tthis.state = _STATE.TOUCH_ZOOM_PAN;\n\t\t\tconst dx = this._pointers[ 0 ].pageX - this._pointers[ 1 ].pageX;\n\t\t\tconst dy = this._pointers[ 0 ].pageY - this._pointers[ 1 ].pageY;\n\t\t\tthis._touchZoomDistanceEnd = this._touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tconst x = ( this._pointers[ 0 ].pageX + this._pointers[ 1 ].pageX ) / 2;\n\t\t\tconst y = ( this._pointers[ 0 ].pageY + this._pointers[ 1 ].pageY ) / 2;\n\t\t\tthis._panStart.copy( this._getMouseOnScreen( x, y ) );\n\t\t\tthis._panEnd.copy( this._panStart );\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _startEvent );\n\n}\n\nfunction onTouchMove( event ) {\n\n\tthis._trackPointer( event );\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 1:\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\tbreak;\n\n\t\tdefault: // 2 or more\n\n\t\t\tconst position = this._getSecondPointerPosition( event );\n\n\t\t\tconst dx = event.pageX - position.x;\n\t\t\tconst dy = event.pageY - position.y;\n\t\t\tthis._touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\n\n\t\t\tconst x = ( event.pageX + position.x ) / 2;\n\t\t\tconst y = ( event.pageY + position.y ) / 2;\n\t\t\tthis._panEnd.copy( this._getMouseOnScreen( x, y ) );\n\t\t\tbreak;\n\n\t}\n\n}\n\nfunction onTouchEnd( event ) {\n\n\tswitch ( this._pointers.length ) {\n\n\t\tcase 0:\n\t\t\tthis.state = _STATE.NONE;\n\t\t\tbreak;\n\n\t\tcase 1:\n\t\t\tthis.state = _STATE.TOUCH_ROTATE;\n\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( event.pageX, event.pageY ) );\n\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\tbreak;\n\n\t\tcase 2:\n\t\t\tthis.state = _STATE.TOUCH_ZOOM_PAN;\n\n\t\t\tfor ( let i = 0; i < this._pointers.length; i ++ ) {\n\n\t\t\t\tif ( this._pointers[ i ].pointerId !== event.pointerId ) {\n\n\t\t\t\t\tconst position = this._pointerPositions[ this._pointers[ i ].pointerId ];\n\t\t\t\t\tthis._moveCurr.copy( this._getMouseOnCircle( position.x, position.y ) );\n\t\t\t\t\tthis._movePrev.copy( this._moveCurr );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t}\n\n\tthis.dispatchEvent( _endEvent );\n\n}\n\nexport { TrackballControls };\n"],"names":["_changeEvent","_startEvent","_endEvent","_EPS","_STATE","_v2","Vector2","_mouseChange","_objectUp","Vector3","_pan","_axis","_quaternion","Quaternion","_eyeDirection","_objectUpDirection","_objectSidewaysDirection","_moveDirection","TrackballControls","Controls","object","domElement","MOUSE","onPointerMove","onPointerDown","onPointerUp","onPointerCancel","onContextMenu","onMouseWheel","onKeyDown","onKeyUp","onTouchStart","onTouchMove","onTouchEnd","onMouseDown","onMouseMove","onMouseUp","element","box","d","scale_x","scale_y","angle","factor","MathUtils","pageX","pageY","event","position","pointer","mouseAction","state","dx","dy","x","y","i"],"mappings":"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","x_google_ignoreList":[0]}